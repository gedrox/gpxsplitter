// Generated by CoffeeScript 1.7.1
var MapBox;

MapBox = React.createClass({
  displayName: 'MapBox',
  propTypes: {
    apiToken: React.PropTypes.string.isRequired,
    id: React.PropTypes.string.isRequired,
    lines: React.PropTypes.arrayOf(React.PropTypes.shape({
      id: React.PropTypes.string.isRequired,
      points: React.PropTypes.array.isRequired,
      strokeColor: React.PropTypes.string.isRequired,
      strokeWidth: React.PropTypes.number
    }))
  },
  defaultState: {
    geoJSONSources: []
  },
  defaultProps: {
    styleUrl: 'https://www.mapbox.com/mapbox-gl-styles/styles/outdoors-v4.json'
  },
  componentDidMount: function() {
    var geoJSON, geoJSONSource, map;
    mapboxgl.accessToken = this.props.apiToken;
    console.log('componentDidMount');
    mapboxStyle.layers.push({
      "id": "route",
      "source": "route",
      "render": {
        "$type": "LineString",
        "line-join": "round",
        "line-cap": "round"
      },
      "style": {
        "line-color": "#FF4136",
        "line-width": 3
      },
      "type": "line"
    });
    map = new mapboxgl.Map({
      container: this.props.id,
      style: mapboxStyle,
      center: [37.830348, -122.486052],
      zoom: 15
    });
    geoJSON = {
      "type": "Feature",
      properties: {},
      "geometry": {
        "type": "LineString",
        "coordinates": [[-122.48369693756104, 37.83381888486939], [-122.48348236083984, 37.83317489144141], [-122.48339653015138, 37.83270036637107], [-122.48356819152832, 37.832056363179625], [-122.48404026031496, 37.83114119107971], [-122.48404026031496, 37.83049717427869], [-122.48348236083984, 37.829920943955045], [-122.48356819152832, 37.82954808664175], [-122.48507022857666, 37.82944639795659], [-122.48610019683838, 37.82880236636284], [-122.48695850372314, 37.82931081282506], [-122.48700141906738, 37.83080223556934], [-122.48751640319824, 37.83168351665737], [-122.48803138732912, 37.832158048267786], [-122.48888969421387, 37.83297152392784], [-122.48987674713133, 37.83263257682617], [-122.49043464660643, 37.832937629287755], [-122.49125003814696, 37.832429207817725], [-122.49163627624512, 37.832564787218985], [-122.49223709106445, 37.83337825839438], [-122.49378204345702, 37.83368330777276]]
      }
    };
    geoJSONSource = new mapboxgl.GeoJSONSource({
      data: geoJSON
    });
    map.addSource('route', geoJSONSource);
    return setTimeout((function(_this) {
      return function() {
        geoJSONSource.setData({
          "type": "Feature",
          "geometry": {
            "type": "LineString",
            "coordinates": [[-122.48339653015138, 37.83270036637107], [-122.48356819152832, 37.832056363179625], [-122.48404026031496, 37.83114119107971], [-122.48404026031496, 37.83049717427869], [-122.48348236083984, 37.829920943955045], [-122.48356819152832, 37.82954808664175], [-122.48507022857666, 37.82944639795659], [-122.48610019683838, 37.82880236636284]]
          }
        });
        return console.log(geoJSONSource.map.fire('zoom'));
      };
    })(this), 1500);
  },
  render: function() {
    return React.DOM.div({
      "style": {
        height: this.props.height,
        width: this.props.width,
        position: 'relative'
      },
      "id": this.props.id
    });
  }
});
